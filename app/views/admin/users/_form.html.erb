<section class="card">
  <div class="card__body">
    <% if user.errors.any? %>
      <div class="alert alert--error">
        <div style="font-weight:700; margin-bottom:6px;">入力内容を確認してください</div>
        <ul style="margin:0; padding-left: 18px;">
          <% user.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form_with model: [:admin, user], local: true, class: "form" do |f| %>
      <div class="grid2">
        <div class="form__row">
          <%= f.label :name, "氏名", class: "label" %>
          <%= f.text_field :name, class: "input", placeholder: "例：デモ" %>
        </div>

        <div class="form__row">
          <%= f.label :employee_number, "社員番号", class: "label" %>
          <%= f.text_field :employee_number, class: "input", placeholder: "例：00001" %>
        </div>
      </div>

      <div class="grid2">
        <div class="form__row">
          <%= f.label :email, "メールアドレス", class: "label" %>
          <%= f.email_field :email, class: "input", placeholder: "example@company.com", autocomplete: "email" %>
        </div>

        <div class="form__row">
          <%= f.label :group_id, "所属グループ", class: "label" %>
          <%= f.collection_select :group_id, @groups, :id, :name,
                { include_blank: "未設定" },
                { class: "select" } %>
        </div>
      </div>

      <div class="grid2">
        <div class="form__row">
          <%= f.label :password, "パスワード", class: "label" %>
          <%= f.password_field :password, class: "input", autocomplete: "new-password" %>
        </div>

        <div class="form__row">
          <%= f.label :password_confirmation, "パスワード（確認）", class: "label" %>
          <%= f.password_field :password_confirmation, class: "input", autocomplete: "new-password" %>
        </div>
      </div>

      <div class="grid2">
        <div class="form__row">
          <%= f.label :role, "権限", class: "label" %>
          <%= f.select :role,
                User.roles.keys.map { |k| [I18n.t("enums.user.role.#{k}"), k] },
                {},
                class: "select" %>
        </div>

        <div class="form__row">
          <%= f.label :joined_on, "入社日", class: "label" %>
          <%= f.date_field :joined_on, class: "input" %>
        </div>
      </div>

      <div class="grid2">
        <div class="form__row">
          <%= f.label :employment_type, "雇用形態", class: "label" %>
          <%= f.select :employment_type,
                User.employment_types.keys.map { |k| [I18n.t("enums.user.employment_type.#{k}"), k] },
                {},
                class: "select" %>
        </div>

        <div class="form__row">
          <%= f.label :position, "役職", class: "label" %>
          <%= f.select :position,
                User.positions.keys.map { |k| [I18n.t("enums.user.position.#{k}"), k] },
                {},
                class: "select" %>
        </div>
      </div>

      <div class="grid2">
        <div class="form__row">
          <%= f.label :salary_type, "給与タイプ", class: "label" %>
          <%= f.select :salary_type,
                User.salary_types.keys.map { |k| [I18n.t("enums.user.salary_type.#{k}"), k] },
                {},
                class: "select" %>
        </div>

        <div class="form__row">
          <%= f.label :salary_amount, "給与金額", class: "label" %>
          <%= f.number_field :salary_amount, class: "input", placeholder: "例：1200", min: 0 %>
        </div>
      </div>

      <div class="grid2">
        <div class="form__row">
          <%= f.label :retired_on, "退職日", class: "label" %>
          <%= f.date_field :retired_on, class: "input" %>
          <p class="hint">在籍中は未入力のままでOKです。</p>
        </div>

        <div class="form__row">
          <!-- 右カラムの余白調整用 -->
        </div>
      </div>

      <%= f.submit(user.persisted? ? "更新する" : "作成する", class: "btn btn--primary") %>
    <% end %>
  </div>
</section>
